---
import BaseLayout from '../layouts/BaseLayout.astro'
import MonogramLight from '../components/MonogramLight.astro'
---

<BaseLayout>
	<section class='space'></section>
	<section id='scroll' class='scroll'>
		<div class='main-wrapper'>
			<div class='main-content'>
				<div class='main-lockup'>
					<MonogramLight />
					<h2>Hailee's favorite pieces</h2>
				</div>
				<p>
					“I've had my eye on the Calden sectional and the Neo upholstered bed
					from the second I saw them. They're so delicious and warm and elevate
					a space instantly.”
				</p>
			</div>
			<div class='main-img'>
				<img src='/MainImage.png' />
			</div>
		</div>
		<div class='grid-section'>
			<img src='image01.png' alt='' class='p1' style='--grid-area: p1' />
			<!-- <img src="image01.png" alt="" class="p2" style="--grid-area: p2" /> -->
			<img src='image01.png' alt='' class='p3' style='--grid-area: p3' />
			<img src='image01.png' alt='' class='p4' style='--grid-area: p4' />
			<img src='image01.png' alt='' class='p5' style='--grid-area: p5' />
			<img src='image01.png' alt='' class='p6' style='--grid-area: p6' />
		</div>
	</section>
	<section class='space'></section>
</BaseLayout>

<style>
	.space {
		height: 100vh;
	}

	#scroll {
	}

	:root {
		--gray-500: oklch(0.3296 0.0022 67.75);
	}

	body {
		margin: 0;
		padding: 0;
	}
	.main-wrapper {
		display: grid;
		grid-template-columns: repeat(3, 1fr);
	}

	section {
		width: 100%;
	}

	.main-content {
		display: grid;
		place-content: center;
		padding: 40px;

		p {
			font-family: 'Publico Headline';
			font-weight: 200;
			color: var(--gray-500);
			font-style: italic;
			font-size: clamp(16px, 1.5vw + 0.5rem, 26px);
			line-height: 1.2;
			max-width: 400px;
		}
	}

	.main-lockup {
		display: flex;
		max-width: 40ch;
		gap: 1rem;

		h2 {
			font-family: 'Publico Headline';
			font-weight: 400;
			color: var(--gray-500);
			font-size: clamp(32px, 4vw + 1rem, 44px);
			line-height: 110%;
			text-wrap: balance;
			margin: 0;
		}

		p {
			font-family: 'Publico Headline';
			max-width: 60ch;
			text-wrap: balance;
		}
	}
	.main-img {
		grid-column: span 2;

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
	}

	.grid-section {
		display: grid;
		grid-template-areas:
			'p1 p2 p3'
			'p4 p5 p6';

		img {
			width: 100%;
			grid-area: var(--grid-area);
		}
	}
</style>

<script>
	import { gsap } from 'gsap'
	import { GSDevTools } from 'gsap/GSDevTools'
	import { ScrollTrigger } from 'gsap/ScrollTrigger'

	gsap.registerPlugin(GSDevTools, ScrollTrigger)

	const p1 = document.querySelector('.p1')

	const tl = gsap.timeline({
		scrollTrigger: {
			trigger: '.scroll',
			end: () => `+=${(p1?.clientHeight ?? 100) * 2}`,
			scrub: true,
			pin: true,
			invalidateOnRefresh: true
		}
	})

	// Single timeline creation with better cleanup
	// const tl = gsap.timeline({
	// 	scrollTrigger: {
	// 		trigger: '.main-wrapper',
	// 		pin: true,
	// 		start: 'top top',
	// 		end: () => `+=${(p1?.clientHeight ?? 100) * 2}`,
	// 		scrub: true,
	// 		markers: true,
	// 		invalidateOnRefresh: true
	// 	}
	// })

	// Use function-based values for responsive animations
	tl.fromTo(
		'.p1, .p5',
		{
			y: () => p1?.clientHeight! * 2,
			duration: 1,
			ease: 'circ.in'
		},
		{
			y: () => -(p1?.clientHeight! * 1),
			ease: 'circ.out'
		}
	).fromTo(
		'.p3, .p4, .p6',
		{
			y: () => p1?.clientHeight! * 3,
			duration: 1,
			ease: 'circ.in'
		},
		{
			y: () => -(p1?.clientHeight! * 1),
			ease: 'circ.out'
		}
	)

	GSDevTools.create()
</script>
